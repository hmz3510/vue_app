{"remainingRequest":"C:\\xampp\\htdocs\\hmz\\xiangmu\\vue-app\\vue_app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\hmz\\xiangmu\\vue-app\\vue_app\\src\\components\\cart\\cartContainer.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\hmz\\xiangmu\\vue-app\\vue_app\\src\\components\\cart\\cartContainer.vue","mtime":1543652784671},{"path":"C:\\xampp\\htdocs\\hmz\\xiangmu\\vue-app\\vue_app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\hmz\\xiangmu\\vue-app\\vue_app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\hmz\\xiangmu\\vue-app\\vue_app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\hmz\\xiangmu\\vue-app\\vue_app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n    import {Toast} from \"mint-ui\"\n    export default {\n        data(){\n            return{\n                uid:1,\n                list:[],\n                count:1,\n                ifallSelect:false,\n                totalMoney:0,\n                check_goods:[],\n                isSelect:false\n            }\n        },\n        methods:{\n            getList(){\n                this.$http.get(\"http://localhost:4000/carts/cartlist?uid=\"+this.uid).then((res)=>{\n                  \n                    this.list=res.body;\n                })\n            },\n            delProduct(iid){        \n                this.$messagebox({\n                    title:\"温馨提示\",\n                    message:\"是否从购物车中移除?\",\n                    showCancelButton:true\n                }).then(action=>{\n                    if(action==\"confirm\"){\n                        this.$http.get(\"http://localhost:4000/carts/delete?iid=\"+iid).then(res=>{\n                            if(res.body.ok==1){\n                                Toast(\"删除成功\")\n                                this.getList();\n                            }\n                        })\n                    }else{\n                        Toast(\"您点了取消,删除失败\")\n                    }\n                })\n            },\n            addCount(iid){\n               for(var item of this.list){\n                   if(item.iid == iid){\n                      var count = item.count;\n                      count++;\n                      this.$http.get(\"http://localhost:4000/carts/update/?iid=\"+iid +\"&count=\" + count).then(res=>{\n                          this.getList();\n                      })\n\n                   }\n               }\n            \n              \n            },\n            delCount(iid){\n                for(var item of this.list){\n                   if(item.iid == iid){\n                      var count = item.count;\n                      count--;\n                      this.$http.get(\"http://localhost:4000/carts/update/?iid=\"+iid +\"&count=\" + count).then(res=>{\n                            if(count==1){\n                                this.$messagebox({\n                                title:\"温馨提示\",\n                                message:\"是否从购物车中移除?\",\n                                showCancelButton:true\n                                }).then(res=>{\n                                    if(res==\"confirm\"){\n                                        this.$http.get(\"http://localhost:4000/carts/delete?iid=\"+iid).then(res=>{\n                                        if(res.body.ok==1){\n                                            Toast(\"已从购物车中移除\")\n                                            this.getList();  \n                                        }\n                                        })\n                                    }\n                                })\n                            }\n                        this.getList();    \n                      })\n\n                    }\n               }\n            },\n            hasSelect(index){\n                var sum=0;  \n                this.list[index].isselect = !this.list[index].isselect\n                if(this.list[index].isselect){\n                    this.check_goods.push(this.list[index])  \n                    this.totalMoney += this.list[index].count * this.list[index].price\n                }else{\n                    this.totalMoney -= this.list[index].count * this.list[index].price\n                    this.check_goods.pop(this.list[index],1)\n                }\n                for(var item of this.list){         \n                    sum += item.price * item.count;\n            \n                }\n                if(sum==this.totalMoney){\n                    this.ifallSelect = true\n                }else{\n                    this.ifallSelect = false;\n                }\n            },\n            selectAll(){\n                this.ifallSelect = !this.ifallSelect;\n                if(this.ifallSelect){\n                    this.isSelect=true\n                    for(var item of this.list){\n                        this.totalMoney += item.price * item.count;\n                    }\n                  \n                }else{\n                    this.isSelect=false\n                    this.totalMoney=0\n                    \n                }\n            },\n            pay(){\n                Toast({\n                    message: '正在支付中,请稍后',\n                });\n            }\n        },\n        created() {\n            this.getList();\n        },\n        computed:{\n            getSum(){\n                //console.log(this.check_goods)\n                this.totalMoney=0;\n                this.check_goods.forEach(item => {\n//                      总价 = 价格 * 数量\n                        this.totalMoney += Number(item.price) * Number(item.count)\n                    })\n                return this.totalMoney;\n            }\n        }\n    }\n",{"version":3,"sources":["cartContainer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cartContainer.vue","sourceRoot":"src\\components\\cart","sourcesContent":["<template>\r\n    <div class=\"app-cart\" >\r\n        <div class=\"cart-empty\" v-if=\"list<=0\">\r\n            <i><img src=\"http://localhost:4000/images/shop-tab/car01.png\" alt=\"\"></i>\r\n            <p class=\"cart-text\">你的购物车空空如也~~~</p>\r\n            <mt-button size=\"small\" type=\"primary\">去购物</mt-button>\r\n        </div>\r\n        <div class=\"cart-list\" v-else>\r\n            <div class=\"cart-item\" v-for=\"(item,index) of list\">\r\n                <mt-cell-swipe class=\"myswipe\" :right=\"[\r\n                        {\r\n                        content: '删除',\r\n                        style: { background: '#fd5f47', color: '#fff' },\r\n                        handler: function(){ delProduct(item.iid) }\r\n    \r\n                        }\r\n                ]\">\r\n                <div class=\"item-left\">\r\n                    <input type=\"checkbox\" class=\"select\" @click=\"hasSelect(index)\" :checked=\"isSelect\" >\r\n                    <img class=\"item-img\" :src=\"item.img\" alt=\"\">\r\n                </div>\r\n                <div class=\"item-content\">\r\n                    <p class=\"item-name\">{{item.title}}</p>\r\n                    <p class=\"size\">规格：默认</p>\r\n                    <p class=\"price\">￥{{item.price.toFixed(2)}}</p>\r\n                </div>\r\n                <div class=\"item-button\">\r\n                    <button class=\"del\" @click=\"delCount(item.iid)\">-</button>\r\n                    <input type=\"number\" class=\"myinput\"   v-model=\"item.count\">\r\n                    <button class=\"add\" @click=\"addCount(item.iid,index)\">+</button>\r\n                </div>\r\n                </mt-cell-swipe>\r\n                  \r\n            </div>\r\n            \r\n        </div>\r\n\r\n        <div class=\"app-bottom\">\r\n            <div class=\"buy-left\">\r\n                <input type=\"checkbox\" :checked=\"ifallSelect\" @click=\"selectAll\">\r\n                <span class=\"allSelect\" >全选</span>\r\n                <p class=\"price\">总计</p>\r\n                <p class=\"totalprice\">￥{{totalMoney.toFixed(2)}}</p>\r\n            </div>\r\n            <div class=\"buy-button\">\r\n                <mt-button type=\"primary\" size=\"normal\" class=\"buy\">删除</mt-button>\r\n                <mt-button type=\"danger\" size=\"normal\" class=\"buy\" @click=\"pay\">去支付</mt-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n   \r\n</template>\r\n<script>\r\n    import {Toast} from \"mint-ui\"\r\n    export default {\r\n        data(){\r\n            return{\r\n                uid:1,\r\n                list:[],\r\n                count:1,\r\n                ifallSelect:false,\r\n                totalMoney:0,\r\n                check_goods:[],\r\n                isSelect:false\r\n            }\r\n        },\r\n        methods:{\r\n            getList(){\r\n                this.$http.get(\"http://localhost:4000/carts/cartlist?uid=\"+this.uid).then((res)=>{\r\n                  \r\n                    this.list=res.body;\r\n                })\r\n            },\r\n            delProduct(iid){        \r\n                this.$messagebox({\r\n                    title:\"温馨提示\",\r\n                    message:\"是否从购物车中移除?\",\r\n                    showCancelButton:true\r\n                }).then(action=>{\r\n                    if(action==\"confirm\"){\r\n                        this.$http.get(\"http://localhost:4000/carts/delete?iid=\"+iid).then(res=>{\r\n                            if(res.body.ok==1){\r\n                                Toast(\"删除成功\")\r\n                                this.getList();\r\n                            }\r\n                        })\r\n                    }else{\r\n                        Toast(\"您点了取消,删除失败\")\r\n                    }\r\n                })\r\n            },\r\n            addCount(iid){\r\n               for(var item of this.list){\r\n                   if(item.iid == iid){\r\n                      var count = item.count;\r\n                      count++;\r\n                      this.$http.get(\"http://localhost:4000/carts/update/?iid=\"+iid +\"&count=\" + count).then(res=>{\r\n                          this.getList();\r\n                      })\r\n\r\n                   }\r\n               }\r\n            \r\n              \r\n            },\r\n            delCount(iid){\r\n                for(var item of this.list){\r\n                   if(item.iid == iid){\r\n                      var count = item.count;\r\n                      count--;\r\n                      this.$http.get(\"http://localhost:4000/carts/update/?iid=\"+iid +\"&count=\" + count).then(res=>{\r\n                            if(count==1){\r\n                                this.$messagebox({\r\n                                title:\"温馨提示\",\r\n                                message:\"是否从购物车中移除?\",\r\n                                showCancelButton:true\r\n                                }).then(res=>{\r\n                                    if(res==\"confirm\"){\r\n                                        this.$http.get(\"http://localhost:4000/carts/delete?iid=\"+iid).then(res=>{\r\n                                        if(res.body.ok==1){\r\n                                            Toast(\"已从购物车中移除\")\r\n                                            this.getList();  \r\n                                        }\r\n                                        })\r\n                                    }\r\n                                })\r\n                            }\r\n                        this.getList();    \r\n                      })\r\n\r\n                    }\r\n               }\r\n            },\r\n            hasSelect(index){\r\n                var sum=0;  \r\n                this.list[index].isselect = !this.list[index].isselect\r\n                if(this.list[index].isselect){\r\n                    this.check_goods.push(this.list[index])  \r\n                    this.totalMoney += this.list[index].count * this.list[index].price\r\n                }else{\r\n                    this.totalMoney -= this.list[index].count * this.list[index].price\r\n                    this.check_goods.pop(this.list[index],1)\r\n                }\r\n                for(var item of this.list){         \r\n                    sum += item.price * item.count;\r\n            \r\n                }\r\n                if(sum==this.totalMoney){\r\n                    this.ifallSelect = true\r\n                }else{\r\n                    this.ifallSelect = false;\r\n                }\r\n            },\r\n            selectAll(){\r\n                this.ifallSelect = !this.ifallSelect;\r\n                if(this.ifallSelect){\r\n                    this.isSelect=true\r\n                    for(var item of this.list){\r\n                        this.totalMoney += item.price * item.count;\r\n                    }\r\n                  \r\n                }else{\r\n                    this.isSelect=false\r\n                    this.totalMoney=0\r\n                    \r\n                }\r\n            },\r\n            pay(){\r\n                Toast({\r\n                    message: '正在支付中,请稍后',\r\n                });\r\n            }\r\n        },\r\n        created() {\r\n            this.getList();\r\n        },\r\n        computed:{\r\n            getSum(){\r\n                //console.log(this.check_goods)\r\n                this.totalMoney=0;\r\n                this.check_goods.forEach(item => {\r\n//                      总价 = 价格 * 数量\r\n                        this.totalMoney += Number(item.price) * Number(item.count)\r\n                    })\r\n                return this.totalMoney;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style>\r\n    .app-cart{\r\n        position: relative;\r\n        height: 100%;\r\n        width: 100%;\r\n    }\r\n    .cart-empty{\r\n        height: 100%;\r\n        width: 100%;\r\n        margin-top: 50px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n    }\r\n    .cart-empty i{\r\n        display: inline-block;\r\n        width: 60px;\r\n        height: 60px;\r\n        background: #ccc;\r\n        border-radius: 50%;\r\n        position: relative;\r\n    }\r\n    .cart-empty img{\r\n        width: 25px;\r\n        height: 25px;\r\n       position: absolute;\r\n       top: 15px;\r\n       left: 15px;\r\n    }\r\n    .cart-empty .cart-text{\r\n        font-size: 14px;\r\n        color: #333;\r\n        padding-left: 10px;\r\n        margin: 10px;\r\n    }\r\n\r\n    .cart-list{\r\n        margin-top: 50px;\r\n    }\r\n    .cart-item{\r\n        border-bottom:1px solid #ddd;\r\n\r\n    }\r\n    .myswipe{\r\n        width: 100% !important;\r\n    }\r\n    .item-left{\r\n        position: absolute;\r\n        left: 20px;\r\n    }\r\n    .cart-item .item-img{\r\n        width: 70px;\r\n        height: 70px;\r\n        margin-left: 10px;\r\n    }\r\n   \r\n    .mint-cell-swipe-button{\r\n        line-height: 90px !important;\r\n    }\r\n    .item-content{\r\n        width: 150px;\r\n        height: 100%;\r\n        margin-top: 5px;\r\n    }\r\n    .item-content .item-name{\r\n        font-size: 16px;\r\n        color: #333;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n    .item-content .size{\r\n        color: #333;\r\n    }\r\n    .item-content .price{\r\n        color: #f20;\r\n        font-size: 14px;\r\n    }\r\n    .item-button{\r\n        margin-top: 50px;\r\n       \r\n    }\r\n    .item-button button{\r\n        width: 25px;\r\n        height: 25px;\r\n        border-radius: 0;\r\n        line-height: 0px;\r\n        padding:0;\r\n    }\r\n    .item-button .del{\r\n        border-top-left-radius: 5px;\r\n        border-bottom-left-radius: 5px;\r\n    }\r\n    .item-button .add{\r\n        border-top-right-radius: 5px;\r\n        border-bottom-right-radius: 5px;\r\n    }\r\n    .item-button .myinput{\r\n        width: 35px;\r\n        height: 25px;\r\n        border-radius: 0;\r\n        text-align: center;\r\n        padding-left: 3px;\r\n        padding-right: 0px;\r\n    }\r\n    .app-bottom{\r\n        background: #fff;\r\n        position: fixed;\r\n        bottom: 55px;\r\n        z-index: 100;\r\n        width: 100%;\r\n        display: flex;\r\n        justify-content: space-between;\r\n    }\r\n    .buy-left{\r\n        display: flex;\r\n        padding: 10px;\r\n    }\r\n    .buy-left input{\r\n        margin-top: 5px;\r\n        margin-left: 12px;\r\n    }\r\n    .buy-left .allSelect{\r\n        font-size: 14px;\r\n        color: #333;\r\n        margin-left: 10px;\r\n    }\r\n    .buy-left .price{\r\n        color: #333;\r\n        margin: 0 10px;\r\n    }\r\n    .buy-left .totalprice{\r\n        color: #f20;\r\n        font-size: 16px;\r\n    }\r\n    .buy{\r\n        border-radius: 0px !important;\r\n    }\r\n</style>"]}]}